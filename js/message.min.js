window.addEventListener('DOMContentLoaded',function(){const [name,message,btn]=document.querySelectorAll('.messageBox form').children;const msgCompo=document.querySelector('.messageBox main');let isValid=false;name.onkeyup=message.onkeyup=function(e){if((/\s/g.test(name.value)||name.value=='')||message.value.replace(/\s/g,'')==''){btn.classList.remove('valid');isValid=false;}else{btn.classList.add('valid');isValid=true;}if(e.key=='Enter'){btn.click()}};btn.addEventListener('click',function(){if(isValid==true){isValid=!isValid;$.post('./message/msg_post.php',{name: name.value,message: message.value},response=>{msgCompo.innerHTML=response;message.value='';message.focus();msgCompo.lastChild.scrollIntoView();})}else{alert(`contraint : \n\t- Name shouldn't contains whitespace\n\t- Message shouln't be just a lot of whitespace`);}});let iLength=msgCompo.children.length;setInterval(()=>{$.get('./message/display_msg.php',response=>msgCompo.innerHTML=response);if(iLength != msgCompo.children.length){msgCompo.lastChild.scrollIntoView()}iLength=msgCompo.children.length;},120);});